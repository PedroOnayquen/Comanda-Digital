<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comanda Digital</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<body>
    <h1>Comanda Digital</h1>

    <div>
        <h2>Itens do Menu</h2>
        <ul id="itensMenu">
            <!-- Itens do menu serão exibidos aqui -->
        </ul>
    </div>

    <div>
        <h2>Comanda</h2>
        <ul id="comandaList"></ul>
        <p>Total: <span id="total">0.00</span> R$</p>
        <button onclick="limparComanda()">Limpar Comanda</button>

        <!-- Botão para criar uma nova comanda -->
        <button onclick="criarNovaComanda()">Nova Comanda</button>
        
        <!-- Lista de comandas disponíveis -->
        <div id="listaDeComandas"></div>
    </div>

    <script>
        // Variáveis para armazenar as comandas e o total
        const comandas = [];
        let comandaAtual = [];
        let total = 0;

        // Função para criar uma nova comanda
        function criarNovaComanda() {
            comandaAtual = [];
            comandas.push(comandaAtual);

            // Atualiza a lista de comandas disponíveis
            atualizarListaDeComandas();

            // Limpa a comanda atual
            limparComanda();
        }

        // Função para atualizar a lista de comandas disponíveis
        function atualizarListaDeComandas() {
            const listaDeComandas = document.getElementById("listaDeComandas");
            listaDeComandas.innerHTML = "";

            // Adiciona um botão para cada comanda disponível
            comandas.forEach((comanda, index) => {
                const botaoComanda = document.createElement("button");
                botaoComanda.textContent = `Comanda ${index + 1}`;
                botaoComanda.onclick = () => selecionarComanda(index);
                listaDeComandas.appendChild(botaoComanda);
            });
        }

        // Função para selecionar uma comanda existente
        function selecionarComanda(index) {
            comandaAtual = comandas[index];

            // Limpa a lista de pedidos na comanda atual
            const comandaList = document.getElementById("comandaList");
            comandaList.innerHTML = "";

            // Preenche a lista de pedidos da comanda selecionada
            comandaAtual.forEach((pedido, index) => {
                const listItem = document.createElement("li");
                listItem.textContent = `${pedido.quantidade}x ${pedido.nome} - ${pedido.preco.toFixed(2)} R$`;
                comandaList.appendChild(listItem);
            });

            // Atualiza o total
            total = calcularTotal(comandaAtual);
            document.getElementById("total").textContent = total.toFixed(2) + " R$";
        }

        // Função para calcular o total da comanda
        function calcularTotal(comanda) {
            return comanda.reduce((total, pedido) => total + pedido.preco, 0);
        }

        // Função para adicionar um pedido à comanda atual
        function adicionarPedido(itemNome, quantidade, itemPreco) {
            const valorPedido = itemPreco * quantidade;

            // Adicionar o pedido à comanda atual
            comandaAtual.push({ nome: itemNome, quantidade, preco: valorPedido });

            // Atualizar a lista de pedidos na comanda atual
            atualizarComanda();

            // Atualizar o total
            total += valorPedido;
            document.getElementById("total").textContent = total.toFixed(2) + " R$";
        }

        // Função para atualizar a lista de pedidos na comanda atual
        function atualizarComanda() {
            const comandaList = document.getElementById("comandaList");
            comandaList.innerHTML = "";

            // Percorrer a lista de pedidos na comanda atual
            comandaAtual.forEach((pedido, index) => {
                const listItem = document.createElement("li");
                listItem.textContent = `${pedido.quantidade}x ${pedido.nome} - ${pedido.preco.toFixed(2)} R$`;
                comandaList.appendChild(listItem);
            });
        }

        // Função para limpar a comanda
        function limparComanda() {
            comandaAtual.length = 0;

            // Limpar a lista de pedidos na comanda atual
            atualizarComanda();

            // Atualizar o total
            total = 0;
            document.getElementById("total").textContent = total.toFixed(2) + " R$";
        }

        // Função para exibir os itens do menu
        function exibirItensDoMenu() {
            const itensMenu = document.getElementById("itensMenu");

            // Substitua os itens de exemplo pelos itens reais do seu menu
            const itens = [
                { nome: "Carne de Gado", preco: 5.00, categoria: "Prato Principal" },
                { nome: "Asa de Frango", preco: 5.00, categoria: "Prato Principal" },
                { nome: "Frango", preco: 4.00, categoria: "Prato Principal" },
                { nome: "Porco", preco: 4.00, categoria: "Prato Principal" },
                { nome: "Queijo", preco: 4.00, categoria: "Prato Principal" },
                { nome: "Calabresa", preco: 4.00, categoria: "Prato Principal" },
                { nome: "Coração de Frango", preco: 4.00, categoria: "Prato Principal" },
                { nome: "Carne do Sol", preco: 5.00, categoria: "Prato Principal" },
                { nome: "Batata Frita", preco: 3.00, categoria: "Guarnição" },
                { nome: "Salada", preco: 2.50, categoria: "Guarnição" },
                { nome: "Refrigerante", preco: 2.00, categoria: "Suco" },
                { nome: "Suco de Laranja", preco: 2.50, categoria: "Suco" },
                { nome: "Cerveja", preco: 3.50, categoria: "Cerveja" },
                { nome: "Cerveja Premium", preco: 4.50, categoria: "Cerveja" }
            ];

            itens.forEach((item, index) => {
                // Criar elemento de lista com botão "Adicionar" e campo de quantidade
                const listItem = document.createElement("li");
                listItem.innerHTML = `
                    <div class="item-input">
                        ${item.nome} - R$ ${item.preco.toFixed(2)} 
                        <input type="number" id="quantidade-${index}" placeholder="Quantidade" min="1" value="1">
                    </div>
                    <button class="item-button" onclick="adicionarPedidoComQuantidade(${index})">Adicionar</button>`;

                // Adicionar o item ao menu apropriado com base na categoria
                if (item.categoria === "Prato Principal") {
                    itensMenu.appendChild(listItem);
                }
            });
        }

        // Chame a função para exibir os itens do menu ao carregar a página
        exibirItensDoMenu();

        // Função para adicionar um pedido à comanda com quantidade especificada
        function adicionarPedidoComQuantidade(index) {
            const itemNome = obterNomeDoItem(index);
            const quantidadeInput = document.getElementById(`quantidade-${index}`);
            const quantidade = parseInt(quantidadeInput.value);

            const itemPreco = obterPrecoDoItem(index);

            if (quantidade > 0) {
                adicionarPedido(itemNome, quantidade, itemPreco);
            }
        }

        // Função para obter o nome do item com base no índice
        function obterNomeDoItem(index) {
            const nomes = [
                "Carne de Gado",
                "Asa de Frango",
                "Frango",
                "Porco",
                "Queijo",
                "Calabresa",
                "Coração de Frango",
                "Carne do Sol",
                "Batata Frita",
                "Salada",
                "Refrigerante",
                "Suco de Laranja",
                "Cerveja",
                "Cerveja Premium"
            ];
            return nomes[index];
        }

        // Função para obter o preço do item com base no índice
        function obterPrecoDoItem(index) {
            const precos = [
                5.00,
                5.00,
                4.00,
                4.00,
                4.00,
                4.00,
                4.00,
                5.00,
                3.00,
                2.50,
                2.00,
                2.50,
                3.50,
                4.50
            ];
            return precos[index];
        }
    </script>
</body>
</html>
